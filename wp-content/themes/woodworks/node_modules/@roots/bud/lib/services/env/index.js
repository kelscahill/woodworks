import { __decorate } from "tslib";
import { ContainerService } from '@roots/bud-framework';
import { bind } from 'helpful-decorators';
/**
 * Env service
 *
 * @public
 */
export class Env extends ContainerService {
    /**
     * Bootstrap event callback
     *
     * @public
     * @decorator `@bind`
     */
    async bootstrap() {
        this.setStore(this.app.context.env);
    }
    /**
     * Get entries from .env which include `APP_PUBLIC` in their name
     *
     * @public
     * @decorator `@bind`
     * @decorator `@once`
     */
    getPublicEnv() {
        return this.getEntries()
            .filter(this.filterPublicEnv)
            .map(this.transformPublicEnv)
            .reduce((a, [k, v]) => ({ ...a, [k]: v }), {});
    }
    /**
     * Transform public env
     *
     * @public
     * @decorator `@bind`
     */
    transformPublicEnv([rawKey, rawValue]) {
        return [rawKey.replace('PUBLIC_', ''), rawValue];
    }
    /**
     * Filter public env
     *
     * @public
     */
    filterPublicEnv([key]) {
        return key.startsWith('PUBLIC_');
    }
}
__decorate([
    bind
], Env.prototype, "bootstrap", null);
__decorate([
    bind
], Env.prototype, "getPublicEnv", null);
__decorate([
    bind
], Env.prototype, "transformPublicEnv", null);
__decorate([
    bind
], Env.prototype, "filterPublicEnv", null);
//# sourceMappingURL=index.js.map