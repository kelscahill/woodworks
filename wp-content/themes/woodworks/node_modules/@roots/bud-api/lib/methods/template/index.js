import BudHtmlWebpackPlugin from './html-webpack-plugin.extension.js';
import BudInterpolateHtmlPlugin from './interpolate-html-plugin.extension.js';
export const template = async function (userOptions) {
    const app = this;
    if (userOptions === false) {
        app.hooks.on('feature.html', false);
        return app;
    }
    app.hooks.on('feature.html', true);
    /**
     * Add {@link BudHtmlWebpackPlugin} if it isn't already added
     */
    if (!app.extensions.has('html-webpack-plugin')) {
        await app.extensions.add(BudHtmlWebpackPlugin);
    }
    /**
     * Add {@link BudInterpolateHtmlPlugin} if it isn't already added
     */
    if (!app.extensions.has('interpolate-html-plugin')) {
        await app.extensions.add(BudInterpolateHtmlPlugin);
    }
    /**
     * If there were no options specified, we're done.
     */
    if (!userOptions || userOptions === true)
        return app;
    /**
     * Plugin references
     */
    const plugins = {
        html: app.extensions.get('html-webpack-plugin'),
        interpolate: app.extensions.get('interpolate-html-plugin'),
    };
    app.info('processing html-webpack-plugin options');
    plugins.html.setOptions(userOptions);
    /**
     * If there were no replacements specified, we're done.
     */
    if (!userOptions.replace)
        return app;
    app.info('processing bud-interpolate-html-plugin options');
    plugins.interpolate.setOptions(userOptions.replace);
    return app;
};
//# sourceMappingURL=index.js.map